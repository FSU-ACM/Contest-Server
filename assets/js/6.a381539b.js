(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{165:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("This page describes how to configure:")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("These configurations are two seperate files, both of which need to be created in order for this suite to run properly. This page has sample/starter examples for both configurations, which you can copy into your files for development and/or deployment.")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("The Compose config defines services for the project including:")]),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("Services are configured with their own volumes, ports, dependencies, and environment variables. The project currently uses Compose file version 2, whose docs can be found "),a("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/compose-file-v2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("The Flask user/team registration webapp")]),this._v(" "),s("li",[this._v("The Docker Compose project")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("IMPORTANT")]),this._v(" "),s("p",[this._v("The "),s("code",[this._v(".env")]),this._v(" file does not interact with the Flask configurations and need to be configured separately.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"docker-compose-and-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-and-env","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker Compose and "),s("code",[this._v(".env")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Databases")]),this._v(" "),s("li",[this._v("Registration Webapp")]),this._v(" "),s("li",[this._v("Domjudge Server")]),this._v(" "),s("li",[this._v("Judgehosts")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("We use the "),a("code",[t._v(".env")]),t._v(" file to define several variables which control the Compose configuration. Environmental variables from the "),a("code",[t._v(".env")]),t._v(" file are interpolated into the \t"),a("code",[t._v("docker-compose.yml")]),t._v(" using "),a("code",[t._v("${VAR}")]),t._v(" syntax.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"sample-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sample-env","aria-hidden":"true"}},[this._v("#")]),this._v(" Sample "),s("code",[this._v(".env")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("COMPOSE_PROJECT_NAME"),s("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v("contest\nDOM_PASS"),s("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v("abadpassword\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"excerpt-from-docker-compose-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#excerpt-from-docker-compose-yml","aria-hidden":"true"}},[this._v("#")]),this._v(" Excerpt from "),s("code",[this._v("docker-compose.yml")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# Registration webapp service")]),t._v("\n"),a("span",{attrs:{class:"token key atrule"}},[t._v("domserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DOMJUDGE_DB_HOST=domdb\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DOMJUDGE_DB_PASSWORD=$"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DOM_PASS"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" DOMJUDGE_DB_ROOT_PASSWORD=$"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("DOM_PASS"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"output-of-docker-compose-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output-of-docker-compose-config","aria-hidden":"true"}},[this._v("#")]),this._v(" Output of "),s("code",[this._v("docker-compose config")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[t._v("domserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("DOMJUDGE_DB_HOST")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" domdb\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("DOMJUDGE_DB_PASSWORD")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abadpassword\n    "),a("span",{attrs:{class:"token key atrule"}},[t._v("DOMJUDGE_DB_ROOT_PASSWORD")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" abadpassword\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"flask-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flask-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Flask Configuration")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("The webapp's config is handled via setting an environmental variable "),a("code",[t._v("FLASK_CONFIG")]),t._v(" to a file path relative to the webapp module's "),a("code",[t._v("__init__.py")]),t._v(". By default, these configs are to be stored in the repo's "),a("code",[t._v("/config")]),t._v(" folder. Below is a sample config, but you can find the recommened developer config stored in "),a("code",[t._v("/config")]),t._v(". For production config, please contact project maintainers.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# General dev config")]),t._v("\nDEBUG "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# MongoDB")]),t._v("\nMONGODB_SETTINGS "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'db'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'database'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),a("span",{attrs:{class:"token comment"}},[t._v("# name of the database in MongoDB")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'host'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'localhost'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{attrs:{class:"token comment"}},[t._v("# hostname of server")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'port'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("27017")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'username'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'username'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{attrs:{class:"token comment"}},[t._v("# Database user")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'password'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'password'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{attrs:{class:"token comment"}},[t._v("# User's password")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# ReCaptcha")]),t._v("\nRECAPTCHA_ENABLED "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),t._v("\nRECAPTCHA_SITE_KEY "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'6LeyxBQUAAAAAHBpG2htNplW1qjcgODp47P6FHuE'")]),t._v("\nRECAPTCHA_SECRET_KEY "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("''")]),t._v("\n\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# Email Config")]),t._v("\nMAIL_SERVER "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'mail.cs.fsu.edu'")]),t._v("\nMAIL_PORT "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("587")]),t._v("\nMAIL_USE_TLS "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),t._v("\nMAIL_USE_SSL "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("False")]),t._v("\nMAIL_DEFAULT_SENDER "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'acm@cs.fsu.edu'")]),t._v("\nMAIL_USERNAME "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'<ACM USERNAME>'")]),t._v("\nMAIL_PASSWORD "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'<ACM PASSWORD>'")]),t._v("\n\n")])])])}],!1,null,null,null);n.options.__file="configuration.md";s.default=n.exports}}]);